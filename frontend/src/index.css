/* Import mobile canvas optimizations */
@import './styles/mobile-canvas.css';

@tailwind base;
@tailwind components;
@tailwind utilities;

/* ============================================ */
/* DARK GLASSMORPHIC THEME */
/* ============================================ */

:root {
  font-family: Inter, -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  line-height: 1.5;
  font-weight: 400;

  color-scheme: dark;
  color: #f8fafc;
  background-color: #111827;

  font-synthesis: none;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

body {
  margin: 0;
  min-width: 320px;
  min-height: 100vh;
  background: #111827;
  color: #f8fafc;
}

* {
  box-sizing: border-box;
}

/* ============================================ */
/* DARK CANVAS WITH ANIMATED GRID */
/* ============================================ */

.canvas-dark {
  position: relative;
  background: linear-gradient(135deg, #111827 0%, #1f2937 50%, #374151 100%);
  background-attachment: fixed;
}

/* Animated grid overlay */
.canvas-dark::before {
  content: '';
  position: absolute;
  inset: 0;
  background-image: 
    linear-gradient(rgba(167, 139, 250, 0.15) 1px, transparent 1px),
    linear-gradient(90deg, rgba(167, 139, 250, 0.15) 1px, transparent 1px);
  background-size: 50px 50px;
  animation: gridMove 20s linear infinite;
  pointer-events: none;
  opacity: 0.4;
  z-index: 0;
}

@keyframes gridMove {
  0% { transform: translate(0, 0); }
  100% { transform: translate(50px, 50px); }
}

/* Radial glow effects */
.canvas-dark::after {
  content: '';
  position: absolute;
  inset: 0;
  background: 
    radial-gradient(circle at 20% 30%, rgba(167, 139, 250, 0.1) 0%, transparent 40%),
    radial-gradient(circle at 80% 70%, rgba(34, 211, 238, 0.08) 0%, transparent 40%),
    radial-gradient(circle at 50% 50%, rgba(244, 114, 182, 0.06) 0%, transparent 50%);
  pointer-events: none;
  animation: glowPulse 8s ease-in-out infinite;
  z-index: 0;
}

@keyframes glowPulse {
  0%, 100% { opacity: 0.6; }
  50% { opacity: 0.9; }
}

/* ============================================ */
/* GLASSMORPHISM UTILITIES */
/* ============================================ */

.glass {
  background: rgba(30, 27, 45, 0.7);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.1);
  box-shadow: 
    0 8px 32px rgba(0, 0, 0, 0.3),
    inset 0 1px 0 rgba(255, 255, 255, 0.1);
}

.glass-light {
  background: rgba(30, 27, 45, 0.5);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  border: 1px solid rgba(255, 255, 255, 0.08);
}

.glass-strong {
  background: rgba(30, 27, 45, 0.85);
  backdrop-filter: blur(32px);
  -webkit-backdrop-filter: blur(32px);
  border: 1px solid rgba(255, 255, 255, 0.15);
}

/* Agentic glassy node style */
.node-glass {
  background: rgba(15, 23, 42, 0.35);
  backdrop-filter: blur(24px) saturate(180%);
  -webkit-backdrop-filter: blur(24px) saturate(180%);
  border: 1px solid rgba(255, 255, 255, 0.1);
  box-shadow: 
    0 4px 16px rgba(0, 0, 0, 0.2),
    0 1px 4px rgba(0, 0, 0, 0.1),
    inset 0 1px 0 rgba(255, 255, 255, 0.06),
    inset 0 -1px 0 rgba(0, 0, 0, 0.1);
}

/* Glass shine on hover */
.glass-shine {
  position: relative;
  overflow: hidden;
}

.glass-shine::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
  transition: left 0.5s ease;
}

.glass-shine:hover::before {
  left: 100%;
}

/* ============================================ */
/* CATEGORY GLOWS */
/* ============================================ */

.glow-input {
  box-shadow: 0 0 12px rgba(124, 58, 237, 0.2), 0 0 24px rgba(124, 58, 237, 0.1);
}

.glow-processing {
  box-shadow: 0 0 12px rgba(217, 119, 6, 0.2), 0 0 24px rgba(217, 119, 6, 0.1);
}

.glow-embedding {
  box-shadow: 0 0 12px rgba(8, 145, 178, 0.2), 0 0 24px rgba(8, 145, 178, 0.1);
}

.glow-storage {
  box-shadow: 0 0 12px rgba(5, 150, 105, 0.2), 0 0 24px rgba(5, 150, 105, 0.1);
}

.glow-retrieval {
  box-shadow: 0 0 12px rgba(37, 99, 235, 0.2), 0 0 24px rgba(37, 99, 235, 0.1);
}

.glow-llm {
  box-shadow: 0 0 12px rgba(219, 39, 119, 0.2), 0 0 24px rgba(219, 39, 119, 0.1);
}

/* ============================================ */
/* ANIMATIONS */
/* ============================================ */

@keyframes edgeFlow {
  0% { 
    stroke-dashoffset: 0;
    opacity: 0.4;
  }
  50% {
    opacity: 0.8;
  }
  100% { 
    stroke-dashoffset: 20;
    opacity: 0.4;
  }
}

.edge-flow {
  stroke-dasharray: 10 5;
  animation: edgeFlow 1s linear infinite;
  stroke-linecap: round;
  stroke-linejoin: round;
}

/* Edge hover effect */
.edge-hover {
  transition: all 0.2s ease;
}

.edge-hover:hover {
  stroke-width: calc(var(--edge-width, 0.75px) + 0.5px) !important;
  opacity: 0.9 !important;
  filter: drop-shadow(0 0 3px currentColor);
}

/* Node execution animations */
@keyframes nodeRunning {
  0%, 100% { 
    box-shadow: 0 0 25px currentColor, 0 0 50px currentColor, 0 0 75px currentColor;
    transform: scale(1);
  }
  50% { 
    box-shadow: 0 0 35px currentColor, 0 0 70px currentColor, 0 0 100px currentColor;
    transform: scale(1.03);
  }
}

@keyframes nodeActive {
  0%, 100% { 
    transform: scale(1);
    box-shadow: 0 0 40px currentColor, 0 0 80px currentColor, 0 0 120px currentColor;
    border-color: currentColor;
    border-width: 2px;
  }
  50% { 
    transform: scale(1.08);
    box-shadow: 0 0 60px currentColor, 0 0 120px currentColor, 0 0 180px currentColor;
    border-color: currentColor;
    border-width: 3px;
  }
}

@keyframes nodeCompleted {
  0% { 
    transform: scale(1);
    box-shadow: 0 0 25px rgba(34, 197, 94, 0.8), 0 0 50px rgba(34, 197, 94, 0.6);
  }
  50% { 
    transform: scale(1.1);
    box-shadow: 0 0 50px rgba(34, 197, 94, 1), 0 0 100px rgba(34, 197, 94, 0.8);
  }
  100% { 
    transform: scale(1);
    box-shadow: 0 0 20px rgba(34, 197, 94, 0.5);
  }
}

@keyframes nodePending {
  0%, 100% { 
    opacity: 0.8;
    transform: scale(1);
    box-shadow: 0 0 10px rgba(156, 163, 175, 0.5);
  }
  50% { 
    opacity: 1;
    transform: scale(1.02);
    box-shadow: 0 0 20px rgba(156, 163, 175, 0.8);
  }
}

@keyframes nodeFailed {
  0% { 
    transform: scale(1);
    box-shadow: 0 0 25px rgba(239, 68, 68, 0.8), 0 0 50px rgba(239, 68, 68, 0.6);
  }
  50% { 
    transform: scale(1.05);
    box-shadow: 0 0 40px rgba(239, 68, 68, 1), 0 0 80px rgba(239, 68, 68, 0.8);
  }
  100% { 
    transform: scale(1);
    box-shadow: 0 0 20px rgba(239, 68, 68, 0.5);
  }
}

.node-running {
  animation: nodeRunning 1.5s ease-in-out infinite !important;
}

.node-active {
  animation: nodeActive 1s ease-in-out infinite !important;
}

.node-completed {
  animation: nodeCompleted 0.8s ease-out !important;
  animation-fill-mode: forwards;
}

.node-pending {
  animation: nodePending 2s ease-in-out infinite !important;
}

.node-failed {
  animation: nodeFailed 0.8s ease-out !important;
  animation-fill-mode: forwards;
}

/* Border pulse animation */
@keyframes borderPulse {
  0%, 100% { 
    border-color: currentColor;
    border-width: 2px;
  }
  50% { 
    border-color: currentColor;
    border-width: 3px;
  }
}

.node-border-pulse {
  animation: borderPulse 1.5s ease-in-out infinite;
}

/* ============================================ */
/* SCROLLBAR UTILITIES */
/* ============================================ */

.scrollbar-hide {
  -ms-overflow-style: none;  /* IE and Edge */
  scrollbar-width: none;  /* Firefox */
}

.scrollbar-hide::-webkit-scrollbar {
  display: none;  /* Chrome, Safari and Opera */
}
