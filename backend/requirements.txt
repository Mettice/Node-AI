# NodeAI - NodeFlow Backend Dependencies
# Python 3.11+ required
# Most versions unpinned to let pip resolve compatible versions

# ============================================
# Core Framework
# ============================================
fastapi
uvicorn[standard]
pydantic
pydantic-settings

# ============================================
# AI/LLM SDKs
# ============================================
# Pin OpenAI to <2.0.0 for compatibility with crewai-tools and langchain-openai
openai>=1.12.0,<2.0.0
anthropic
# Pin tiktoken for compatibility with langchain-openai
tiktoken>=0.7.0
google-genai

# ============================================
# Vector Search & Storage
# ============================================
faiss-cpu
# faiss-gpu  # Uncomment if you have CUDA GPU
pinecone-client
neo4j  # Neo4j driver for knowledge graph integration
# Pin chromadb for compatibility with crewai-tools
chromadb>=0.4.22,<0.5.0

# ============================================
# LangChain (for text splitting, document loaders, and agents)
# ============================================
# Let crewai determine compatible versions
langchain
langchain-community
# Pin langchain-openai for compatibility
langchain-openai>=0.1.7,<0.2.0
langchain-anthropic

# ============================================
# CrewAI (for multi-agent coordination)
# ============================================
# Install crewai with tools support - it will pull compatible langchain versions
# Note: [tools] includes additional dependencies for tool integration
crewai[tools]

# ============================================
# Agent Lightning (optional - for agent optimization)
# ============================================
# NOTE: Agent Lightning has dependency conflicts with crewai-tools and langchain-openai.
# If you want to use it, install separately: pip install agentlightning
# The wrapper handles missing dependencies gracefully, so it's safe to skip.
# agentlightning  # Commented out due to dependency conflicts - install separately if needed

# ============================================
# Document Processing
# ============================================
pypdf2
pdfplumber
python-docx
python-multipart

# ============================================
# Image Processing
# ============================================
Pillow
pytesseract  # For OCR (requires Tesseract binary installed)

# ============================================
# Audio/Video Processing
# ============================================
openai-whisper  # For local audio transcription
opencv-python  # For video frame extraction

# ============================================
# Structured Data Processing
# ============================================
pandas  # For CSV/Excel/Parquet processing
openpyxl  # For Excel file support
pyarrow  # For Parquet file support

# ============================================
# Database
# ============================================
sqlalchemy
aiosqlite
psycopg2-binary  # PostgreSQL driver for Supabase
supabase  # Supabase Python client

# ============================================
# Utilities
# ============================================
python-dotenv
httpx

# ============================================
# Development & Testing
# ============================================
pytest
pytest-asyncio
pytest-cov
pytest-mock
black
ruff

# ============================================
# Security
# ============================================
slowapi  # Rate limiting
python-jose[cryptography]  # JWT tokens
cryptography  # For secrets vault encryption
passlib[bcrypt]  # Password hashing

# ============================================
# Monitoring & Observability
# ============================================
sentry-sdk[fastapi]  # Error tracking and performance monitoring
# langsmith  # LangSmith observability (optional - uncomment to enable)
# langfuse  # LangFuse observability (optional - uncomment to enable)

# ============================================
# Text Processing
# ============================================
nltk  # For semantic chunking
rank-bm25  # BM25 ranking algorithm for keyword-based retrieval

# ============================================
# Optional: Additional Features
# ============================================
cohere  # For reranking (Cohere API)
sentence-transformers  # For HuggingFace embeddings (also used for Cross-Encoder reranking)
duckduckgo-search  # For web search tool (optional)
beautifulsoup4  # For web scraping (HTML parsing)
lxml  # Faster HTML parser (optional but recommended)
feedparser  # For RSS/Atom feed parsing
boto3  # For AWS S3 integration

# ============================================
# Azure Integrations
# ============================================
azure-search-documents  # Azure Cognitive Search
azure-storage-blob  # Azure Blob Storage
azure-identity  # Azure authentication
azure-keyvault-secrets  # Azure Key Vault (optional)
azure-ai-textanalytics  # Azure Text Analytics (for NLP tasks)
azure-ai-translation-text  # Azure Translator

# ============================================
# AI-Native Intelligence Nodes
# ============================================
plotly  # For chart generation in auto_chart_generator
kaleido  # For plotly static image generation
matplotlib  # Alternative charting library
seaborn  # Statistical plotting for data analysis
scikit-learn  # For statistical analysis and ML features
scipy  # Scientific computing functions

# ============================================
# Business Intelligence Nodes
# ============================================
stripe  # For Stripe analytics integration (optional - API key based)

# ============================================
# Communication & Social Media
# ============================================
slack-sdk  # For Slack node integration
google-api-python-client  # For Google services integration
google-auth-httplib2  # Google auth for APIs
google-auth-oauthlib  # Google OAuth flow

# ============================================
# Developer Tools
# ============================================
bandit  # Security scanning for Python code
safety  # Security vulnerability scanning
